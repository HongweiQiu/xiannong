(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabar/shopcart"],{"0cdc":function(t,e,n){"use strict";var i=n("c125"),r=n.n(i);r.a},"29bb":function(t,e,n){"use strict";(function(t){function n(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){s=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw o}}}}function i(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=getApp().globalData,o=a.imgRemote,c={data:function(){return{imgRemote:o,edit:!0,page:1,cartitem:[],itemList:[],settlement:!1,allCheck:!1,recommendList:!1,totalPrice:"",feeInfo:""}},methods:{fixed:function(t){return t.toFixed(2)},calculate:function(){var t,e=0,i=n(this.itemList);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.checked&&(e+=r.buy_num*r.sku.market_price)}}catch(a){i.e(a)}finally{i.f()}return this.totalPrice=e,this.totalPrice},delterGood:function(){var e=this;e.settlement?t.showModal({title:"温馨提醒",content:"确定要删除选中商品吗？",confirmColor:"#59B727",success:function(i){if(i.confirm){var r,a="",o=n(e.itemList);try{for(o.s();!(r=o.n()).done;){var c=r.value;1==c.checked&&(a+=c.id+",")}}catch(l){o.e(l)}finally{o.f()}var s=a.substring(0,a.length-1),u={token:t.getStorageSync("userToken"),cart_id:s};e.$get(e.$api.cartdel_cart,u,(function(t){var n=t.data;1==n.code?(e.$Toast("删除成功"),e.cartIndex()):e.$Toast(n.msg)}))}}}):e.$Toast("没有选中商品哦")},selectCheck:function(t){t>=0&&(this.itemList[t].checked=!this.itemList[t].checked,1!=this.itemList[t].status&&1==this.edit&&(this.itemList[t].checked=!1)),this.settlement=this.itemList.some((function(t){return 1==t.checked})),this.allCheck=this.itemList.every((function(t){return 1==t.checked})),this.calculate()},allCheckGood:function(){var t=this;this.allCheck=!this.allCheck,this.itemList.map((function(e){return 1==t.edit&&1!=e.status?e.checked=!1:e.checked=t.allCheck,e})),this.selectCheck()},shoplist:function(){if(this.settlement){var e=this.itemList.filter((function(t){return 1==t.checked}));t.setStorageSync("selectGoods",e),t.navigateTo({url:"/pages/shopcart/shoplist"})}else this.$Toast("没有选中商品哦")},cartIndex:function(){var e=this;this.$get(this.$api.cartIndex,{token:t.getStorageSync("userInfo")},(function(t){var n=t.data;0==n.code&&(e.itemList=n.data,e.calculate())}))},likeGood:function(){var t=this;this.num,this.page;this.$get(this.$api.goodsUser_like,{},(function(e){var n=e.data;1==n.code&&(t.recommendList=n.data)}))},updateCart:function(e,n){var i=this,r={token:t.getStorageSync("userToken"),cart_id:e,buy_num:n};this.$get(this.$api.update_cart_num,r,(function(t){var e=t.data;1==e.code?(i.$Toast("成功更新购物车数量"),i.calculate()):i.$Toast(e.msg)}))},plus:function(t){1==this.itemList[t].status&&this.itemList[t].buy_num++;var e=this.itemList[t];this.updateCart(e.id,e.buy_num)},input:function(t){t.value?this.itemList[t.index].buy_num=t.value:this.itemList[t.index].buy_num=parseFloat(0);var e=this.itemList[t.index];this.updateCart(e.id,e.buy_num)},minus:function(t){1==this.itemList[t].status&&(1==this.itemList[t].buy_num?this.itemList[t].buy_num=1:this.itemList[t].buy_num--);var e=this.itemList[t];this.updateCart(e.id,e.buy_num)},getFreight:function(){var t=this;this.$get(this.$api.mainFreight,{},(function(e){var n=e.data;1==n.code&&(t.feeInfo=n.data)}))}},onShow:function(){this.edit=!0,this.allCheck=!1,this.settlement=!1,this.getFreight(),this.cartIndex(),this.likeGood()},onLoad:function(){}};e.default=c}).call(this,n("543d")["default"])},"3fac":function(t,e,n){"use strict";(function(t){n("0c84"),n("921b");i(n("66fd"));var e=i(n("69fb"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"5b6e":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={myStepper:function(){return n.e("components/stepper/index").then(n.bind(null,"0042"))},myRecomend:function(){return n.e("components/recomend/index").then(n.bind(null,"83d8"))}},r=function(){var t=this,e=t.$createElement,n=(t._self._c,0!=t.itemList.length&&t.feeInfo.over>t.totalPrice?t.fixed(Math.abs(t.totalPrice-t.feeInfo.over)):null),i=0!=t.itemList.length?t.fixed(t.totalPrice):null;t._isMounted||(t.e0=function(e){t.edit=!1}),t.$mp.data=Object.assign({},{$root:{m0:n,m1:i}})},a=[]},"69fb":function(t,e,n){"use strict";n.r(e);var i=n("5b6e"),r=n("c267");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("0cdc");var o,c=n("f0c5"),s=Object(c["a"])(r["default"],i["b"],i["c"],!1,null,"717707ac",null,!1,i["a"],o);e["default"]=s.exports},c125:function(t,e,n){},c267:function(t,e,n){"use strict";n.r(e);var i=n("29bb"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a}},[["3fac","common/runtime","common/vendor"]]]);