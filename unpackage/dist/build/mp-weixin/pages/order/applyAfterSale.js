(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/applyAfterSale"],{"0fca":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uniPopup:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-popup/uni-popup")]).then(n.bind(null,"1f85"))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.info.goods,(function(t,n){var o=e.__get_orig(t),r=e.$fixed(t.buy_num*t.market_price);return{$orig:o,m0:r}})));e._isMounted||(e.e0=function(t,n){var o=arguments[arguments.length-1].currentTarget.dataset,r=o.eventParams||o["event-params"];n=r.index;return e.file.splice(n,1)}),e.$mp.data=Object.assign({},{$root:{l0:n}})},a=[]},"472c":function(e,t,n){"use strict";n.r(t);var o=n("e866"),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},"723f":function(e,t,n){},9602:function(e,t,n){"use strict";n.r(t);var o=n("0fca"),r=n("472c");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("de40");var i,u=n("f0c5"),c=Object(u["a"])(r["default"],o["b"],o["c"],!1,null,"03a1ef00",null,!1,o["a"],i);t["default"]=c.exports},de40:function(e,t,n){"use strict";var o=n("723f"),r=n.n(o);r.a},e866:function(e,t,n){"use strict";(function(e){function n(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw i}}}}function o(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{info:[],allCheck:!0,imgRemote:getApp().globalData.imgRemote,totalPrice:0,file:[],id:"",refund_desc:""}},methods:{showUpload:function(e){"open"==e?this.$refs.popup.open():this.$refs.popup.close()},chooseImage:function(t){var n=this;e.chooseImage({sizeType:["original","compressed"],sourceType:[t],success:function(t){var o=t.tempFilePaths;for(var r in n.$refs.popup.close(),o)e.uploadFile({url:getApp().globalData.rootUrl+n.$api.mainUpload,name:"file",filePath:o[r],success:function(e){n.file=n.file.concat(n.imgRemote+JSON.parse(e.data).data)}})}})},allCheckGood:function(){var e=this;this.allCheck=!this.allCheck,this.info.goods.map((function(t){return t.checked=e.allCheck,t})),this.selectCheck()},selectCheck:function(e){e>=0&&(this.info.goods[e].checked=!this.info.goods[e].checked),this.allCheck=this.info.goods.every((function(e){return 1==e.checked})),this.calculate()},calculate:function(){var e,t=0,o=n(this.info.goods);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.checked&&(t+=r.buy_num*r.market_price)}}catch(a){o.e(a)}finally{o.f()}return this.totalPrice=t.toFixed(2),this.totalPrice},submit:function(){var t,o=this,r=this.info.goods.filter((function(e){return 1==e.checked})),a="",i=n(r);try{for(i.s();!(t=i.n()).done;){var u=t.value;a+=u.id+","}}catch(f){i.e(f)}finally{i.f()}var c=a.substring(0,a.length-1);if(!c)return this.$Toast("请选择退货商品");this.$showModal("确认退货？",(function(){var t={token:e.getStorageSync("userToken"),order_id:o.id,order_goods_id:c,refund_desc:o.refund_desc,refund_images:o.file.join(",")};o.$get(o.$api.orderRefund,t,(function(t){var n=t.data;1==n.code?(o.$Toast("申请成功"),getApp().globalData.isReload=!0,setTimeout((function(){e.reLaunch({url:"orderAfterSale"})}),1e3)):o.$Toast(n.msg)}))}))}},onLoad:function(t){var n=this;this.id=t.id,this.$get(this.$api.orderDetail,{token:e.getStorageSync("userToken"),order_id:t.id},(function(e){var o=e.data;1==o.code?(t.returnIndex>=0&&(o.data.goods=o.data.goods.filter((function(e,n){return n==t.returnIndex}))),o.data.goods.map((function(e){return e.checked=!0,e})),n.info=o.data,n.calculate()):n.$Toast(o.msg)}))}};t.default=a}).call(this,n("543d")["default"])},f334:function(e,t,n){"use strict";(function(e){n("0450"),n("921b");o(n("66fd"));var t=o(n("9602"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])}},[["f334","common/runtime","common/vendor"]]]);