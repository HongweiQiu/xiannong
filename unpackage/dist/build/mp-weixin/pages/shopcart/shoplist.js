(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopcart/shoplist"],{"20fd":function(t,e,a){"use strict";a.r(e);var n=a("49a5"),r=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"268a":function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var r=function(){var t=this,e=t.$createElement,a=(t._self._c,t.__map(t.shop,(function(e,a){var n=t.__get_orig(e),r=t.$fixed(e.sku.market_price*e.buy_num);return{$orig:n,m0:r}}))),n=t.fixed(t.totalPrice),r=t.fixed(t.freight?t.freight:0),o=t.fixed(t.totalPrice+parseFloat(t.freight)),i=t.fixed(t.addressInfo.money),c=parseFloat(t.freight),s=t.fixed(t.totalPrice+parseFloat(t.freight));t._isMounted||(t.e0=function(e){t.show=!1}),t.$mp.data=Object.assign({},{$root:{l0:a,m1:n,m2:r,m3:o,m4:i,m5:c,m6:s}})},o=[]},"49a5":function(t,e,a){"use strict";(function(t){function n(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=r(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return c=t.done,t},e:function(t){s=!0,i=t},f:function(){try{c||null==a.return||a.return()}finally{if(s)throw i}}}}function r(t,e){if(t){if("string"===typeof t)return o(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=function(){a.e("components/gpp-datePicker/gpp-datePicker").then(function(){return resolve(a("2648"))}.bind(null,a)).catch(a.oe)},s=function(){a.e("components/yzc-paykeyboard/yzc-paykeyboard").then(function(){return resolve(a("c7f2"))}.bind(null,a)).catch(a.oe)},u=getApp().globalData,f=u.imgRemote,d={components:{gppDatePicker:c,passkeyborad:s},data:function(){var t;return t={startDate:"2021-05-15",endDate:"2022-09-09",pickerDate:"2021-05-16",visible:!1,addressInfo:{},imgRemote:f,shop:[],totalPrice:""},i(t,"visible",!1),i(t,"feeInfo",""),i(t,"freight",""),i(t,"showSwitch",!1),i(t,"pay_type","wxpay"),i(t,"remark",""),i(t,"receiving",""),i(t,"show",!1),i(t,"showPay",0),i(t,"pay_password",""),i(t,"price",""),t},methods:{getTomorrow:function(){function t(t){return t<10?"0"+t:t}var e=new Date(new Date-0+864e5),a=e.getFullYear(),n=e.getMonth()+parseInt(1),r=e.getDate();this.startDate="".concat(a,"-").concat(t(n),"-").concat(t(r)),this.pickerDate="".concat(a,"-").concat(t(n),"-").concat(t(r)),this.endDate="".concat(a+2,"-12-31")},confirmDate:function(t){this.pickerDate=t.dateValue},payWay:function(t){this.pay_type=t.detail.value},confirmPay:function(){var e,a=this,r="",o=n(a.shop);try{for(o.s();!(e=o.n()).done;){var i=e.value;1==i.checked&&(r+=i.id+",")}}catch(m){o.e(m)}finally{o.f()}var c=r.substring(0,r.length-1),s=a.addressInfo,u=s.province,f=s.city,d=s.area,l=s.address,p=s.shou_name,h=s.shou_phone,y=s.tax_name,g=s.tax_num;if(!u)return a.$Toast("请先填写收货地址");if(!p&&!h)return a.$Toast("请先填写收货人和收货人电话");if(a.showSwitch){if(!y&&!g)return a.$Toast("发票信息不能为空")}else y="",g="";t.login({provider:"weixin",success:function(e){var n={token:t.getStorageSync("userToken"),province:u,city:f,area:d,address:l,shou_name:p,shou_phone:h,tax_name:y,tax_num:g,cart_ids:c,freight:a.freight,pay_type:a.pay_type,total:a.totalPrice,remark:a.remark,delivery_time:a.pickerDate,code:e.code};"money"==a.pay_type&&(n.pay_password=a.pay_password),a.$get(a.$api.orderAdd_order,n,(function(e){var n=e.data;1==n.code?"wxpay"!=a.pay_type?(a.$Toast("提交订单成功"),setTimeout((function(){t.reLaunch({url:"./paySuccess",success:function(){getApp().globalData.isReload=!0}})}),1e3)):t.requestPayment({provider:"wxpay",timeStamp:n.data.timeStamp,nonceStr:n.data.nonceStr,package:n.data.package,signType:n.data.signType,paySign:n.data.paySign,success:function(e){a.$Toast("支付成功"),setTimeout((function(){t.reLaunch({url:"./paySuccess",success:function(){getApp().globalData.isReload=!0}})}),500)},fail:function(e){a.$Toast("支付取消"),setTimeout((function(){t.reLaunch({url:"./paySuccess",success:function(){getApp().globalData.isReload=!0}})}),500)}}):"money"==a.pay_type&&"支付密码错误"==n.msg&&t.showModal({title:"",content:"支付密码错误,请重试",cancelText:"忘记密码",confirmColor:"#009943",success:function(e){e.confirm?a.show=!0:e.cancel&&t.navigateTo({url:"/pages/user/forgetPay"})}})}))}})},pay:function(){"wxpay"==this.pay_type?this.confirmPay():(this.showPay=1)?(this.show=!0,this.price=this.totalPrice+parseFloat(this.freight)):this.$showModal("是否设置支付密码",(function(e){t.navigateTo({url:"/pages/user/setPay"})}))},isSetPwd:function(){var e=this,a=this;a.$get(a.$api.userIsset_pay_password,{token:t.getStorageSync("userInfo").token},(function(t){e.showPay=t.data.code}))},moneyPay:function(t){this.pay_password=t,this.confirmPay()},switchChange:function(t){this.showSwitch=t.target.value},fixed:function(t){return 0==t?"0.00":parseFloat(t).toFixed(2)},modifyAddress:function(){t.navigateTo({url:"./delivery"})},getFreight:function(){var t=this;this.$get(this.$api.mainFreight,{},(function(e){var a=e.data;1==a.code&&(t.feeInfo=a.data,t.freight=t.totalPrice>a.data.over?0:a.data.freight)}))},getAddress:function(){var e=this,a={token:t.getStorageSync("userToken")};this.$get(this.$api.userInfo,a,(function(t){var a=t.data;1==a.code&&(e.addressInfo=a.data,e.receiving=a.data.province+a.data.city+a.data.area+a.data.address,e.receiving.match("null")&&(e.receiving=""))}))}},onShow:function(){this.getAddress(),this.isSetPwd()},onLoad:function(e){this.getTomorrow(),this.shop=t.getStorageSync("selectGoods");var a,r=0,o=n(this.shop);try{for(o.s();!(a=o.n()).done;){var i=a.value;r+=i.buy_num*i.sku.market_price}}catch(c){o.e(c)}finally{o.f()}this.totalPrice=r,this.getFreight()}};e.default=d}).call(this,a("543d")["default"])},"76dd":function(t,e,a){"use strict";(function(t){a("0450"),a("921b");n(a("66fd"));var e=n(a("9995"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},"770e":function(t,e,a){"use strict";var n=a("f44b"),r=a.n(n);r.a},9995:function(t,e,a){"use strict";a.r(e);var n=a("268a"),r=a("20fd");for(var o in r)"default"!==o&&function(t){a.d(e,t,(function(){return r[t]}))}(o);a("770e");var i,c=a("f0c5"),s=Object(c["a"])(r["default"],n["b"],n["c"],!1,null,"73d2cc1d",null,!1,n["a"],i);e["default"]=s.exports},f44b:function(t,e,a){}},[["76dd","common/runtime","common/vendor"]]]);