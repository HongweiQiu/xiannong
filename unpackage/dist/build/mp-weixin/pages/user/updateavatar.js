(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/updateavatar"],{"32fe":function(t,a,e){"use strict";(function(t){e("0450"),e("921b");n(e("66fd"));var a=n(e("7171"));function n(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("543d")["createPage"])},5385:function(t,a,e){"use strict";e.r(a);var n=e("5fe6"),o=e.n(n);for(var r in n)"default"!==r&&function(t){e.d(a,t,(function(){return n[t]}))}(r);a["default"]=o.a},"5fe6":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=getApp().globalData,n=e.imgRemote,o={data:function(){return{imgRemote:n,avatarUrl:"",personInfo:{},file:""}},methods:{memberInfo:function(){var a=this,e={token:t.getStorageSync("userToken")};this.$get(this.$api.userInfo,e,(function(t){var e=t.data;1==e.code&&(a.personInfo=e.data,e.data.avatar.match("xml;base64")?a.avatarUrl="../../static/img/avatar.png":a.avatarUrl=e.data.avatar)}))},showUpload:function(t){"open"==t?this.$refs.popup.open():this.$refs.popup.close()},chooseImage:function(a){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:[a],success:function(t){e.file=t.tempFilePaths[0],e.$refs.popup.close(),e.uploadImg()}})},uploadImg:function(){var a=this;t.uploadFile({url:getApp().globalData.rootUrl+a.$api.mainUpload,name:"file",filePath:a.file,success:function(t){a.avatarUrl=a.imgRemote+JSON.parse(t.data).data}})},formSubmit:function(){var a=this;this.$showModal("确认修改信息",(function(){var e={avatar:a.avatarUrl};a.$get(a.$api.userProfile,e,(function(e){1==e.data.code?(a.$Toast("修改成功"),setTimeout((function(){t.navigateBack()}),1e3)):a.$Toast(e.data.msg)}))}))}},onLoad:function(){var t=this;t.memberInfo()}};a.default=o}).call(this,e("543d")["default"])},7171:function(t,a,e){"use strict";e.r(a);var n=e("d606"),o=e("5385");for(var r in o)"default"!==r&&function(t){e.d(a,t,(function(){return o[t]}))}(r);e("a33e");var u,i=e("f0c5"),c=Object(i["a"])(o["default"],n["b"],n["c"],!1,null,"b27ad4d0",null,!1,n["a"],u);a["default"]=c.exports},"7c1a":function(t,a,e){},a33e:function(t,a,e){"use strict";var n=e("7c1a"),o=e.n(n);o.a},d606:function(t,a,e){"use strict";e.d(a,"b",(function(){return o})),e.d(a,"c",(function(){return r})),e.d(a,"a",(function(){return n}));var n={uniPopup:function(){return Promise.all([e.e("common/vendor"),e.e("components/uni-popup/uni-popup")]).then(e.bind(null,"1f85"))}},o=function(){var t=this,a=t.$createElement;t._self._c},r=[]}},[["32fe","common/runtime","common/vendor"]]]);